(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{361:function(t,a,s){"use strict";s.r(a);var _=s(10),v=Object(_.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"登录操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录操作"}},[t._v("#")]),t._v(" 登录操作")]),t._v(" "),a("p",[t._v("人机验证方式登录包含"),a("strong",[t._v("账号密码登录")]),t._v("与手"),a("strong",[t._v("机短信验证码登录")])]),t._v(" "),a("p",[a("strong",[t._v("注：扫码登录")]),t._v("不需要进行"),a("strong",[t._v("人机验证")]),t._v("，故"),a("strong",[t._v("不使用")]),t._v("以下接口")]),t._v(" "),a("h2",{attrs:{id:"扫码登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#扫码登录"}},[t._v("#")]),t._v(" 扫码登录")]),t._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/login/login_action/QR.html"}},[t._v("扫码登录")])],1)]),t._v(" "),a("h2",{attrs:{id:"验证登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证登录"}},[t._v("#")]),t._v(" 验证登录")]),t._v(" "),a("p",[t._v("人机验证流程：")]),t._v(" "),a("ol",[a("li",[t._v("请求验证码参数，得到登录密钥"),a("code",[t._v("key")]),t._v("与极验id"),a("code",[t._v("gt")]),t._v("和极验KEY"),a("code",[t._v("challenge")])]),t._v(" "),a("li",[t._v("进行滑动or点击验证")]),t._v(" "),a("li",[t._v("返回验证结果"),a("code",[t._v("validate")]),t._v("与"),a("code",[t._v("seccode")]),t._v("，进行短信或密码登录")])]),t._v(" "),a("h3",{attrs:{id:"申请captcha验证码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#申请captcha验证码"}},[t._v("#")]),t._v(" 申请captcha验证码")]),t._v(" "),a("blockquote",[a("p",[t._v("https://passport.bilibili.com/x/passport-login/captcha?source=main_web")])]),t._v(" "),a("p",[a("em",[t._v("请求方式：GET")])]),t._v(" "),a("p",[a("strong",[t._v("json回复：")])]),t._v(" "),a("p",[t._v("根对象：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("内容")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("code")]),t._v(" "),a("td",[t._v("num")]),t._v(" "),a("td",[t._v("返回值")]),t._v(" "),a("td",[t._v("0：成功")])]),t._v(" "),a("tr",[a("td",[t._v("message")]),t._v(" "),a("td",[t._v("str")]),t._v(" "),a("td",[t._v("返回信息")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("ttl")]),t._v(" "),a("td",[t._v("num")]),t._v(" "),a("td",[t._v("1")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("data")]),t._v(" "),a("td",[t._v("obj")]),t._v(" "),a("td",[t._v("信息本体")]),t._v(" "),a("td")])])]),t._v(" "),a("p",[a("code",[t._v("data")]),t._v("对象：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("内容")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("geetest")]),t._v(" "),a("td",[t._v("obj")]),t._v(" "),a("td",[t._v("极验captcha数据")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("tencent")]),t._v(" "),a("td",[t._v("obj")]),t._v(" "),a("td",[t._v("(?)")]),t._v(" "),a("td",[a("strong",[t._v("作用尚不明确")])])]),t._v(" "),a("tr",[a("td",[t._v("token")]),t._v(" "),a("td",[t._v("str")]),t._v(" "),a("td",[t._v("登录 API token")]),t._v(" "),a("td",[t._v("与 captcha 无关，与登录接口有关")])]),t._v(" "),a("tr",[a("td",[t._v("type")]),t._v(" "),a("td",[t._v("str")]),t._v(" "),a("td",[t._v("验证方式")]),t._v(" "),a("td",[t._v("用于判断使用哪一种验证方式，目前所见只有极验"),a("br"),t._v("geetest：极验")])])])]),t._v(" "),a("p",[a("code",[t._v("geetest")]),t._v("对象：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("字段")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("内容")]),t._v(" "),a("th",[t._v("备注")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("gt")]),t._v(" "),a("td",[t._v("str")]),t._v(" "),a("td",[t._v("极验id")]),t._v(" "),a("td",[t._v("一般为固定值")])]),t._v(" "),a("tr",[a("td",[t._v("challenge")]),t._v(" "),a("td",[t._v("str")]),t._v(" "),a("td",[t._v("极验KEY")]),t._v(" "),a("td",[t._v("由B站后端产生用于人机验证")])])])]),t._v(" "),a("p",[a("strong",[t._v("示例：")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://passport.bilibili.com/x/passport-login/captcha?source=main_web'")]),t._v("\n")])])]),a("details",[a("summary",[t._v("查看响应示例：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ttl"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"geetest"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"token"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"00fbe75cc2864ba0af969231f193a974"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"geetest"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"challenge"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a57d9be17505d4a15ed84694c48fbf74"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"gt"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ac597a4506fee079629df5d8b66dd4fe"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tencent"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"appid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("h3",{attrs:{id:"进行验证"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进行验证"}},[t._v("#")]),t._v(" 进行验证")]),t._v(" "),a("p",[t._v("本文档为Bilibili文档，验证码为geetest极验提供，故不提供api")]),t._v(" "),a("p",[t._v("附: "),a("a",{attrs:{href:"https://kuresaru.github.io/geetest-validator/",target:"_blank",rel:"noopener noreferrer"}},[t._v("手动验证器"),a("OutboundLink")],1),t._v(" "),a("a",{attrs:{href:"https://github.com/kuresaru/geetest-validator",target:"_blank",rel:"noopener noreferrer"}},[t._v("及其源码"),a("OutboundLink")],1)]),t._v(" "),a("ol",[a("li",[t._v("打开手动验证器，在1、2分别填入上面API返回的"),a("code",[t._v("gt")]),t._v("和"),a("code",[t._v("challenge")])]),t._v(" "),a("li",[t._v("点击按钮3，稍等加载验证码，点击按钮4进行验证")]),t._v(" "),a("li",[t._v("验证完成后，点击按钮5生成验证结果")]),t._v(" "),a("li",[t._v("使用最开始获得到的"),a("code",[t._v("key")]),t._v("、"),a("code",[t._v("challenge")]),t._v("和刚获得到的"),a("code",[t._v("validate")]),t._v("、"),a("code",[t._v("seccode")]),t._v("继续之后的登录操作")])]),t._v(" "),a("h3",{attrs:{id:"继续登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#继续登录"}},[t._v("#")]),t._v(" 继续登录")]),t._v(" "),a("ul",[a("li",[a("RouterLink",{attrs:{to:"/login/login_action/SMS.html"}},[t._v("短信登录")])],1),t._v(" "),a("li",[a("RouterLink",{attrs:{to:"/login/login_action/password.html"}},[t._v("密码登录")])],1)])])}),[],!1,null,null,null);a.default=v.exports}}]);